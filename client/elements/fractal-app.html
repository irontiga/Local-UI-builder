<link rel="import" href="/client/bower_components/polymer/polymer.html">

<script src="/client/bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>

<!-- POLYMER ELEMENTS -->
<link rel="import" href="/client/bower_components/paper-material/paper-material.html">
<link rel="import" href="/client/bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="/client/bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="/client/bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="/client/bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="/client/bower_components/paper-menu/paper-menu.html">
<link rel="import" href="/client/bower_components/paper-item/paper-item.html">
<link rel="import" href="/client/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/client/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/client/bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="/client/bower_components/paper-menu/paper-menu.html">
<link rel="import" href="/client/bower_components/paper-item/paper-item.html">
<link rel="import" href="/client/bower_components/iron-icons/iron-icons.html">

<!-- Router -->
<link rel="import" href="/client/bower_components/carbon-route/carbon-location.html">
<link rel="import" href="/client/bower_components/carbon-route/carbon-route-converter.html">
<link rel="import" href="/client/bower_components/carbon-route/carbon-route.html">

<!-- Fractal styles -->
<link rel="stylesheet" href="/client/fonts/roboto.css">
<link rel="stylesheet" href="/client/css/main.css">


<dom-module id="fractal-app">
	<template>
		<carbon-location route="{{route}}"></carbon-location>
		<carbon-route route="{{route}}" pattern="/fractal/:activePlugin" data="{{data}}" tail="{{tail}}"></carbon-route>
		
		<!--<div id="login-screen">
		
		</div>-->
		
		<paper-drawer-panel>

			<paper-header-panel fixed drawer>

				<paper-toolbar>
					<span class="title">Fractal</span>
				</paper-toolbar>

				<paper-menu>
					<template is="dom-repeat" items="{{urls}}">
						<paper-item>
							<a is="pushstate-anchor" href="{{_genIframeUrl(item.url)}}">{{item.title}}</a>
						</paper-item>
					</template>
				</paper-menu>

			</paper-header-panel>

			<paper-header-panel main>
				<paper-toolbar>
					<paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
					<span class="title">Name</span>
					<paper-icon-button icon="refresh"></paper-icon-button>

					<paper-menu-button horizontal-align="right">
						<paper-icon-button icon="add" class="dropdown-trigger">+</paper-icon-button>
						<paper-menu class="dropdown-content">
							<paper-item>Share</paper-item>
							<paper-item>Settings</paper-item>
							<paper-item>Help</paper-item>
						</paper-menu>
					</paper-menu-button>
				</paper-toolbar>
				
				<template is="dom-repeat" items="{{urls}}">
					<iframe hidden$="{{_checkActiveRoute(item, route)}}" src="{{_joinPluginUrl(item.url)}}"></iframe>
				</template>
				
				<div hidden$="{{_checkPageNotFound(urls, route)}}" id="404-page">
					<h1>404</h1>
					<h3>Plugin not found</h3>
				</div>
			</paper-header-panel>

		</paper-drawer-panel>
		<iframe id="plugin-js-loader" src="/client/plugin-js.html"></iframe>
	</template>
	<script src="/client/js/messageHandler.js"></script>
	<script src="/client/js/app.js"></script>
</dom-module>